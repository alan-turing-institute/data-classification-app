{% extends "base.html" %}
{% load project_tags %}
{% load django_tables2 %}


{% block h1_title %}Data Classification for {{ classification.project.name }}{% endblock %}

{% block content %}

{% with classification.project as project %}
<p>You ({{ classification.user }}, {{classification.role|project_role_display}}) have classified this project as Tier {{ classification.tier }}</p>

{% if not project.has_tier %}
  <p><a class="btn btn-primary btn-lg" href="{% url 'projects:classify_delete' project.id %}">Delete My Classification</a></p>
{% endif %}

{% if other_classifications.exists %}
  <ul>
  {% for cl in other_classifications %}
    <li>{{ cl.user }} ({{cl.role|project_role_display}}) classified the project as Tier {{ cl.tier }}</li>
  {% endfor %}
  </ul>
{% endif %}

<h2>Overall classification</h2>
{% if project.has_tier %}
  Project is tier {{ project.tier }}
{% elif not project.is_classification_ready %}
<p>Classification incomplete</p>
{% elif project.tier_conflict %}
<p>Users disagree on data tier</p>
{% endif %}

{% if questions_table %}
  <h2>Classification answers</h2>
  {% render_table questions_table %}
{% endif %}

{% endwith %}

{% endblock content %}

{% block crumbs %}
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
  <li class="breadcrumb-item"><a href="{% url 'projects:list' %}">Projects</a></li>
  <li class="breadcrumb-item"><a href="{% url 'projects:detail' classification.project.id %}">{{ classification.project.name }}</a></li>
  <li class="breadcrumb-item active" aria-current="page">Data Classification</li>
{% endblock crumbs %}
