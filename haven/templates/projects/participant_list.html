{% extends "base.html" %}
{% load project_tags %}

{% block page_title %}{{ project.name }}: Participants{% endblock %}
{% block h1_title %}{{ project.name }}: Participants{% endblock %}

{% block content %}
<table class="table table-sm">
  <tbody>
    {% if ordered_participants %}
      {% for participant in ordered_participants %}
          <tr>
            <td>

              {% if user.user_role.can_edit_users %}
                <a href="{% url 'identity:edit_user' participant.user.id %}">
              {% endif %}

                {{ participant.user.get_full_name }}: {{participant.user.username}}

              {% if user.user_role.can_edit_users %}
                </a>
              {% endif %}
              <br/>
              {{ participant.role|project_role_display }}
            </td>

            <td>
              <small>added on {{ participant.created_at|date:'d M Y H:i' }}
                <br/>
                by {{ participant.created_by }}</small></td>
          </tr>
      {% endfor %}
    {% endif %}
  </tbody>
</table>


<div class="my-3" role="group">
  {% if project_role.can_add_participants %}
    <a class="btn btn-primary btn-lg" href="{% url 'projects:add_user' project.id %}">Add Participant</a>
  {% endif %}
</div>

{% endblock %}


{% block crumbs %}
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
  <li class="breadcrumb-item"><a href="{% url 'projects:list' %}">Projects</a></li>
  <li class="breadcrumb-item"><a href="{% url 'projects:detail' project.id %}">{{ project.name }}</a></li>
  <li class="breadcrumb-item active" aria-current="page">Participants</li>
{% endblock crumbs %}
